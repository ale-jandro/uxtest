function qS(selector){return document.querySelector(selector)}function parseResults(results){var data=[];void 0!==results[2].suggested_queries&&(results[2].suggested_queries.forEach(function(e,i){data.push(e.q)}),autocomplete.suggest(data))}!function(Autocomplete,ch){"use strict";Autocomplete.prototype._configureShortcuts=function(){var that=this;return ch.shortcuts.add(ch.onkeyenter,this.uid,function(event){event.preventDefault(),that._selectSuggestion()}),ch.shortcuts.add(ch.onkeyesc,this.uid,function(){that.hide(),that._el.value=that._originalQuery}),ch.shortcuts.add(ch.onkeyuparrow,this.uid,function(event){event.preventDefault();var value;null===that._highlighted?(that._highlighted=that._suggestionsQuantity-1,value=that._suggestions[that._highlighted]):that._highlighted<=0?(this._prevHighlighted=this._currentHighlighted=null,value=that._currentQuery):(that._highlighted-=1,value=that._suggestions[that._highlighted]),that._toogleHighlighted(),that._options.html||(that._el.value=value)}),ch.shortcuts.add(ch.onkeydownarrow,this.uid,function(){var value;null===that._highlighted?(that._highlighted=0,value=that._suggestions[that._highlighted]):that._highlighted>=that._suggestionsQuantity-1?(that._highlighted=null,value=that._currentQuery):(that._highlighted+=1,value=that._suggestions[that._highlighted]),that._toogleHighlighted(),that._options.html||(that._el.value=value)}),this._popover.on("beforeshow",function(){ch.shortcuts.on(that.uid)}),this._popover.on("beforehide",function(){ch.shortcuts.off(that.uid)}),this.on("destroy",function(){ch.shortcuts.remove(this.uid)}),this}}(this.ch.Autocomplete,this.ch),function(window,ch){"use strict";function Datepicker(selector,options){var that=this;this._init(selector,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}function createMethods(method){Datepicker.prototype[method]=function(){return this._popover[method](),parent[method].call(this),this}}tiny.inherits(Datepicker,ch.Component);var parent=Datepicker.super_.prototype,methods=["enable","disable"],len=methods.length;for(Datepicker.prototype.name="datepicker",Datepicker.prototype.constructor=Datepicker,Datepicker.prototype._defaults={format:"DD/MM/YYYY",side:"bottom",align:"center",hiddenby:"pointers"},Datepicker.prototype._init=function(selector,options){parent._init.call(this,selector,options);var that=this;return this.field=this._el,this.field.insertAdjacentHTML("afterend",'<i role="button" class="ch-datepicker-trigger ch-icon-calendar"></i>'),this.trigger=tiny.next(this.field),this._calendar=new ch.Calendar(document.createElement("div"),options),this._popover=new ch.Popover(this.trigger,{_className:"ch-datepicker ch-cone",_ariaRole:"tooltip",content:this._calendar.container,side:this._options.side,align:this._options.align,offsetX:1,offsetY:10,shownby:"pointertap",hiddenby:this._options.hiddenby}),tiny.on(this._popover._content,ch.onpointertap,function(event){var el=event.target;"TD"===el.nodeName&&el.className.indexOf("ch-calendar-disabled")===-1&&el.className.indexOf("ch-calendar-other")===-1&&that.pick(el.innerHTML)}),this.field.setAttribute("aria-describedby","ch-popover-"+this._popover.uid),this.field.type="text",this.field.value=this._options.selected?this._calendar.select():this.field.value,this.on("disable",this.hide),this},Datepicker.prototype.show=function(){return this._enabled?(this._popover.show(),this.emit("show"),this):this},Datepicker.prototype.hide=function(){return this._popover.hide(),this.emit("hide"),this},Datepicker.prototype.pick=function(day){return this.field.value=[this._calendar._dates.current.year,this._calendar._dates.current.month,day].join("/"),this._popover.hide(),this.select(this.field.value),this},Datepicker.prototype.select=function(date){return date?(this._calendar.select(date),this.field.value=this._calendar.select(),this.emit("select"),this):this._calendar.select()},Datepicker.prototype.getToday=function(){return this._calendar.getToday()},Datepicker.prototype.nextMonth=function(){return this._calendar.nextMonth(),this.emit("nextmonth"),this},Datepicker.prototype.prevMonth=function(){return this._calendar.prevMonth(),this.emit("prevmonth"),this},Datepicker.prototype.nextYear=function(){return this._calendar.nextYear(),this.emit("nextyear"),this},Datepicker.prototype.prevYear=function(){return this._calendar.prevYear(),this.emit("prevyear"),this},Datepicker.prototype.reset=function(){return this.field.value="",this._calendar.reset(),this.emit("reset"),this},Datepicker.prototype.setFrom=function(date){return this._calendar.setFrom(date),this},Datepicker.prototype.setTo=function(date){return this._calendar.setTo(date),this};len;)createMethods(methods[len-=1]);Datepicker.prototype.destroy=function(){tiny.parent(this.trigger).removeChild(this.trigger),this._el.removeAttribute("aria-describedby"),this._el.type="date",this._popover.destroy(),parent.destroy.call(this)},ch.factory(Datepicker)}(this,this.ch),function(ch){"use strict";ch.Dropdown.prototype._highlightOption=function(key){var optionsLength=this._navigation.length;this._shown&&this._selected!==(key===ch.onkeydownarrow?optionsLength-1:0)&&(this._selected!==-1&&(this._navigation[this._selected].blur(),this._navigation[this._selected].removeAttribute("id")),key===ch.onkeydownarrow?this._selected+=1:this._selected-=1,this._navigation[this._selected].focus(),this._navigation[this._selected].id="ch-dropdown"+this.uid+"-selected")},ch.Dropdown.prototype._navigationShortcuts=function(){var that=this;return ch.shortcuts.add(ch.onkeyuparrow,this.uid,function(event){event.preventDefault(),that._highlightOption(event.shortcut)}),ch.shortcuts.add(ch.onkeydownarrow,this.uid,function(event){event.preventDefault(),that._highlightOption(event.shortcut)}),this.once("destroy",function(){ch.shortcuts.remove(ch.onkeyuparrow,that.uid),ch.shortcuts.remove(ch.onkeydownarrow,that.uid)}),this}}(this.ch),function(ch){"use strict";ch.Dropdown.prototype._highlightOption=function(key){var optionsLength=this._navigation.length;this._shown&&this._selected!==(key===ch.onkeydownarrow?optionsLength-1:0)&&(this._selected!==-1&&(this._navigation[this._selected].blur(),this._navigation[this._selected].removeAttribute("id")),key===ch.onkeydownarrow?this._selected+=1:this._selected-=1,this._navigation[this._selected].focus(),this._navigation[this._selected].id="ch-dropdown"+this.uid+"-selected")},ch.Dropdown.prototype._navigationShortcuts=function(){var that=this;return ch.shortcuts.add(ch.onkeyuparrow,this.uid,function(event){event.preventDefault(),that._highlightOption(event.shortcut)}),ch.shortcuts.add(ch.onkeydownarrow,this.uid,function(event){event.preventDefault(),that._highlightOption(event.shortcut)}),this.once("destroy",function(){ch.shortcuts.remove(ch.onkeyuparrow,that.uid),ch.shortcuts.remove(ch.onkeydownarrow,that.uid)}),this}}(this.ch),function(window,ch){"use strict";function Tabs(el,options){var that=this;this._init(el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}function createMethods(method){Tabs.prototype[method]=function(tab){var i;if(void 0!==tab)this.tabpanels[tab-1][method]();else{for(i=this.tabpanels.length;i;)this.tabpanels[i-=1][method]();parent[method].call(this),this._el.setAttribute("aria-disabled",!this._enabled)}return this}}tiny.inherits(Tabs,ch.Component);var parent=Tabs.super_.prototype,location=window.location,methods=["enable","disable"],len=methods.length,hashRegExp=new RegExp("\\#!?\\/?(.[^\\?|\\&|\\s]+)");for(Tabs.prototype.name="tabs",Tabs.prototype.constructor=Tabs,Tabs.prototype._init=function(el,options){parent._init.call(this,el,options);var that=this;return this._currentHash=function(){var hash=location.hash.match(hashRegExp);return null!==hash?hash[1]:""}(),this._snippet=this._el.cloneNode(!0),this.container=this._el,tiny.addClass(this.container,"ch-tabs"),this.triggers=this.container.children[0],this.triggers.setAttribute("role","tablist"),tiny.addClass(this.triggers,"ch-tabs-triggers"),this.tabpanels=[],this.panel=this.container.children[1],this.panel.setAttribute("role","presentation"),tiny.addClass(this.panel,"ch-tabs-panel"),tiny.addClass(this.panel,"ch-box-lite"),this._tabsPanels=this.panel.children,Array.prototype.forEach.call(this.triggers.getElementsByTagName("a"),function(el,index){that._createTab(index,el)}),this._shown=1,this._hasHash(),this},Tabs.prototype._createTab=function(i,e){var tab,that=this,panel=this._tabsPanels[i],options={_classNameIcon:null,_classNameTrigger:"ch-tab",_classNameContainer:"ch-tabpanel",toggle:!1};return void 0===panel&&(panel=document.createElement("div"),panel.setAttribute("id",e.href.split("#")[1]),this.panel.appendChild(panel),options.content=e.href,options.waiting=this._options.waiting,options.cache=this._options.cache,options.method=this._options.method),options.container=panel,tab=new ch.Expandable(e,options),tab._hash=e.href.split("#")[1],tab.trigger.setAttribute("role","tab"),tab.container.setAttribute("role","tabpanel"),tab.on("show",function(){that._updateShown(i+1)}),this.tabpanels.push(tab),this},Tabs.prototype._hasHash=function(){this.emit("hide",this._shown);var i=0,l=this.tabpanels.length;for(i;i<l;i+=1)if(this.tabpanels[i]._hash===this._currentHash){this._shown=i+1;break}return this.tabpanels[this._shown-1].show(),this.emit("show",this._shown),this},Tabs.prototype.show=function(tab){return this.tabpanels[tab-1].show(),this},Tabs.prototype._updateShown=function(tab){return this._shown===tab?this:(this.emit("hide",this._shown),this.tabpanels[this._shown-1].hide(),this._shown=tab,location.hash=this._currentHash=""===this._currentHash?"#!/"+this.tabpanels[this._shown-1]._hash:location.hash.replace(location.hash.match(hashRegExp)[1],this.tabpanels[this._shown-1]._hash),this.emit("show",this._shown),this)},Tabs.prototype.getShown=function(){return this._shown},Tabs.prototype.content=function(tab,content,options){if(void 0===tab||"number"!=typeof tab)throw new window.Error("Tabs.content(tab, content, options): Expected a number of tab.");return void 0===content?this.tab[tab-1].content():(this.tabpanels[tab-1].content(content,options),this)};len;)createMethods(methods[len-=1]);Tabs.prototype.destroy=function(){this._el.parentNode.replaceChild(this._snippet,this._el),tiny.trigger(window.document,ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Tabs)}(this,this.ch),function(ch){"use strict";ch.Validation.prototype._configureContainer=function(){var that=this;this.bubble=this._container=new ch.Bubble({reference:that._options.reference||function(){var reference,h4,span,trigger=that.trigger;return tiny.hasClass(trigger,"ch-form-options")?trigger.querySelectorAll("h4").length>0?(h4=trigger.querySelector("h4"),span=document.createElement("span"),span.insertAdjacentHTML("beforeend",h4.innerHTML),h4.innerHTML="",h4.insertBefore(span,h4.firstChild),reference=h4.children[0]):reference=trigger.previousElementSibling&&"LEGEND"===trigger.previousElementSibling.tagName?trigger.previousElementSibling:trigger.querySelector("label"):reference=trigger,reference}(),align:that._options.align,side:that._options.side,offsetY:that._options.offsetY,offsetX:that._options.offsetX})},ch.Validation.prototype._showErrorMessage=function(message){return this.bubble.content(message).show(),this.trigger.setAttribute("aria-label","ch-"+this.bubble.name+"-"+this.bubble.uid),this},ch.Validation.prototype._hideErrorMessage=function(){return this.bubble.hide(),this.trigger.removeAttribute("aria-label"),this},ch.Validation.prototype.refreshPosition=function(options){return void 0===options?this.bubble._position:(this.bubble.refreshPosition(options),this)}}(this.ch),function(window,ch){"use strict";function Zoom(selector,options){var that=this;this._init(selector,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}function onImagesLoads(image,callback){var images;images=Array.isArray(image)?image:[image],images.forEach(function(image){if(tiny.on(image,"load",function onImgLoad(){var len=images.length;window.setTimeout(function(){--len<=0&&callback.call(image)},200),image.removeEventListener("load",onImgLoad)},!1),image.complete||void 0===image.complete){var src=image.src;image.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",image.src=src}})}tiny.inherits(Zoom,ch.Layer);var parent=Zoom.super_.prototype;Zoom.prototype.name="zoom",Zoom.prototype.constructor=Zoom,Zoom.prototype._defaults=tiny.extend(tiny.clone(parent._defaults),{_className:"ch-zoom",_ariaRole:"tooltip",_hideDelay:0,fx:"none",width:"300px",height:"300px",side:"right",align:"top",offsetX:20,offsetY:0,waiting:"Loading zoom..."}),Zoom.prototype._init=function(selector,options){parent._init.call(this,selector,options);var that=this;return this._loaded=!1,this._loading=function(){var dummyElement=document.createElement("div");return dummyElement.innerHTML='<div class="ch-zoom-loading ch-hide"><div class="ch-loading-large"></div><p>'+that._options.waiting+"</p></div>",dummyElement.firstChild}(),this.trigger.appendChild(this._loading),this._seeker=function(){var dummyElement=document.createElement("div");return dummyElement.innerHTML='<div class="ch-zoom-seeker ch-hide"></div>',dummyElement.firstChild}(),this.trigger.appendChild(this._seeker),this._original=this.trigger.children[0],this._zoomed=new window.Image,onImagesLoads(this._original,function(){that._originalLoaded(),tiny.on(window,"resize",that._updateOffset.bind(that))}),onImagesLoads(this._zoomed,function(){that._zoomedLoaded()}),this.on("imageload",function(){tiny.hasClass(this._loading,"ch-hide")||(that.show(),tiny.addClass(this._loading,"ch-hide"))}),tiny.addClass(this.trigger,"ch-zoom-trigger"),tiny.on(this.trigger,"click",function(event){event.preventDefault()},!1),tiny.on(this.trigger,ch.onpointermove,function(event){that._move(event)},!1),this},Zoom.prototype._originalLoaded=function(){var width=this._original.width,height=this._original.height;this.trigger.style.width=width+"px",this.trigger.style.height=height+"px",this._loading.style.display="block",this._loading.style.left=(width-this._loading.clientWidth)/2+"px",this._loading.style.top=(height-this._loading.clientHeight)/2+"px",this._loading.style.display="",this._originalWidth=width,this._originalHeight=height,this._updateOffset()},Zoom.prototype._updateOffset=function(){var offset=tiny.offset(this._el);this._originalOffsetLeft=offset.left,this._originalOffsetTop=offset.top,this._positioner.refresh()},Zoom.prototype._zoomedLoaded=function(){this._ratioX=this._zoomed.width/this._originalWidth,this._ratioY=this._zoomed.height/this._originalHeight,this._seekerWidth=window.Math.floor(window.parseInt(this._options.width,10)/this._ratioX),this._seekerHeight=window.Math.floor(window.parseInt(this._options.height,10)/this._ratioY),this._seekerHalfWidth=window.Math.floor(this._seekerWidth/2),this._seekerHalfHeight=window.Math.floor(this._seekerHeight/2),this._seeker.style.cssText="width:"+this._seekerWidth+"px;height:"+this._seekerHeight+"px",this.content(this._zoomed),this._loaded=!0,this.emit("imageload")},Zoom.prototype._move=function(event){if(this._enabled&&this._loaded){var x,y,pageX=event.pageX||event.clientX+document.documentElement.scrollLeft,pageY=event.pageY||event.clientY+document.documentElement.scrollTop,seekerLeft=pageX-this._seekerHalfWidth,seekerTop=pageY-this._seekerHalfHeight;x=seekerLeft<=this._originalOffsetLeft?0:pageX+this._seekerHalfWidth>this._originalWidth+this._originalOffsetLeft?this._originalWidth-this._seekerWidth-2:seekerLeft-this._originalOffsetLeft,y=seekerTop<=this._originalOffsetTop?0:pageY+this._seekerHalfHeight>this._originalHeight+this._originalOffsetTop?this._originalHeight-this._seekerHeight-2:seekerTop-this._originalOffsetTop,this._seeker.style.left=x+"px",this._seeker.style.top=y+"px",this._zoomed.style.cssText="left:"+-this._ratioX*x+"px;top:"+-this._ratioY*y+"px"}},Zoom.prototype.show=function(content,options){return!this._enabled||this._shown?this:this._loaded?(tiny.removeClass(this._seeker,"ch-hide"),parent.show.call(this,content,options),this):(tiny.removeClass(this._loading,"ch-hide"),this.loadImage(),this)},Zoom.prototype.hide=function(){return this._shown?this._loaded?(tiny.addClass(this._seeker,"ch-hide"),parent.hide.call(this),this):(tiny.addClass(this._loading,"ch-hide"),this):this},Zoom.prototype.loadImage=function(){return this._zoomed.src=this._el.href,this},Zoom.prototype.destroy=function(){var parentElement;parentElement=tiny.parent(this._seeker),parentElement.removeChild(this._seeker),parent.destroy.call(this)},ch.factory(Zoom,parent._normalizeOptions)}(this,this.ch),ch.onkeytab="tab",ch.onkeyenter="enter",ch.onkeyesc="esc",ch.onkeyleftarrow="left_arrow",ch.onkeyuparrow="up_arrow",ch.onkeyrightarrow="right_arrow",ch.onkeydownarrow="down_arrow",ch.onkeybackspace="backspace",tiny.removeClass(document.documentElement,"no-js");for(var m in tiny)/^on\w+/.test(m)&&"string"==typeof tiny[m]&&(ch[m]=tiny[m]);!function(window,ch){"use strict";var document=window.document,codeMap={8:ch.onkeybackspace,9:ch.onkeytab,13:ch.onkeyenter,27:ch.onkeyesc,37:ch.onkeyleftarrow,38:ch.onkeyuparrow,39:ch.onkeyrightarrow,40:ch.onkeydownarrow},shortcuts={_active:null,_queue:[],_collection:{},add:function(shortcut,name,callback){return void 0===this._collection[name]&&(this._collection[name]={}),void 0===this._collection[name][shortcut]&&(this._collection[name][shortcut]=[]),this._collection[name][shortcut].push(callback),this},remove:function(name,shortcut,callback){var evt,evtCollection,evtCollectionLenght;if(void 0===name)throw new Error('Shortcuts - "remove(name, shortcut, callback)": "name" parameter must be defined.');if(void 0===shortcut)return delete this._collection[name],this;if(void 0===callback)return delete this._collection[name][shortcut],this;for(evtCollection=this._collection[name][shortcut],evtCollectionLenght=evtCollection.length,evt=0;evt<evtCollectionLenght;evt+=1)evtCollection[evt]===callback&&evtCollection.splice(evt,1);return this},on:function(name){var queueLength=this._queue.length,item=queueLength-1;for(item;item>=0;item-=1)this._queue[item]===name&&this._queue.splice(item,1);return this._queue.push(name),this._active=name,this},off:function(name){var queueLength=this._queue.length,item=queueLength-1;for(item;item>=0;item-=1)this._queue[item]===name&&(this._queue.splice(item,1),this._queue.length>0?this._active=this._queue[this._queue.length-1]:this._active=null);return this}},shortcutsEmitter=function(event){var callbacks,callbacksLenght,keyCode=event.keyCode.toString(),shortcut=codeMap[keyCode],i=0;if(void 0!==shortcut&&null!==shortcuts._active&&(callbacks=shortcuts._collection[shortcuts._active][shortcut],event.shortcut=shortcut,void 0!==callbacks))for(callbacksLenght=callbacks.length,i=0;i<callbacksLenght;i+=1)callbacks[i](event)};tiny.on(document,"keydown",shortcutsEmitter),ch.shortcuts=shortcuts}(this,this.ch),function(window,ch){"use strict";function Carousel(el,options){var that=this;this._init(el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}tiny.inherits(Carousel,ch.Component);var pointertap=ch.onpointertap,Math=window.Math,setTimeout=window.setTimeout,parent=Carousel.super_.prototype,VENDOR_PREFIX=function(){var prop,regex=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,styleDeclaration=document.getElementsByTagName("script")[0].style;for(prop in styleDeclaration)if(regex.test(prop))return prop.match(regex)[0].toLowerCase();return"WebkitOpacity"in styleDeclaration?"webkit":"KhtmlOpacity"in styleDeclaration?"khtml":""}();Carousel.prototype.name="carousel",Carousel.prototype.constructor=Carousel,Carousel.prototype._defaults={async:0,arrows:!0,pagination:!1,fx:!0,autoHeight:!0,autoMargin:!0},Carousel.prototype._init=function(el,options){parent._init.call(this,el,options);var that=this;return this._snippet=this._el.cloneNode(!0),this._list=this._el.children[0],tiny.addClass(this._el,"ch-carousel"),tiny.addClass(this._list,"ch-carousel-list"),this._items=function(){var collection=that._list.querySelectorAll("li");return Array.prototype.forEach.call(collection,function(item){tiny.addClass(item,"ch-carousel-item")}),collection}(),this._mask=document.createElement("div"),this._mask.setAttribute("role","tabpanel"),this._mask.setAttribute("class","ch-carousel-mask"),this._mask.appendChild(this._list),this._el.appendChild(this._mask),this._maskWidth=this._getOuterDimensions(this._mask).width,this._itemWidth=this._getOuterDimensions(this._items[0]).width,this._itemOuterWidth=parseInt(tiny.css(this._items[0],"width")),this._itemExtraWidth=0,this._itemHeight=this._getOuterDimensions(this._items[0]).height,this._itemMargin=0,this._arrowsCreated=!1,this._paginationCreated=!1,this._limitPerPage=0,this._currentPage=1,this._pages=0,this._pageWidth=0,this._async=this._options.async,this._prevArrow=document.createElement("div"),this._prevArrow.setAttribute("role","button"),this._prevArrow.setAttribute("aria-hidden","true"),this._prevArrow.setAttribute("aria-label","Previous elements"),this._prevArrow.setAttribute("class","ch-carousel-prev ch-carousel-disabled"),tiny.on(this._prevArrow,pointertap,function(){that.prev()},!1),this._nextArrow=document.createElement("div"),this._nextArrow.setAttribute("role","button"),this._nextArrow.setAttribute("aria-label","Next elements"),this._nextArrow.setAttribute("aria-hidden","true"),this._nextArrow.setAttribute("class","ch-carousel-next"),tiny.on(this._nextArrow,pointertap,function(){that.next()},!1),this._pagination=document.createElement("div"),this._pagination.setAttribute("role","navigation"),this._pagination.setAttribute("class","ch-carousel-pages"),tiny.on(this._pagination,pointertap,function(event){var page=event.target.getAttribute("data-page");null!==page&&that.select(window.parseInt(page,10))},!1),ch.viewport.on("resize",function(){that.refresh()}),this._options.fx||tiny.addClass(this._list,"ch-carousel-nofx"),tiny.support.transition||(this._list.style.cssText+="position:absolute;left:0;"),this._options.pagination&&this._addPagination(),void 0!==this._options.arrows&&this._options.arrows!==!1&&this._addArrows(),this._updateARIA(),this._updateLimitPerPage(),this._updateDistribution(),this},Carousel.prototype._updateARIA=function(){var page,that=this,total=this._items.length+this._async;Array.prototype.forEach.call(this._items,function(item,i){page=Math.floor(i/that._limitPerPage)+1,item.setAttribute("aria-hidden",page!==that._currentPage),item.setAttribute("aria-setsize",total),item.setAttribute("aria-posinset",i+1),item.setAttribute("aria-label","page"+page)})},Carousel.prototype._loadAsyncItems=function(){if(0!==this._async){var total=this._currentPage*this._limitPerPage,amount=total-this._items.length,width=this._itemWidth+this._itemExtraWidth,height=(width*this._itemHeight/this._itemWidth).toFixed(3),item=["<li",' class="ch-carousel-item"',' style="width:'+(width%1===0?width:width.toFixed(4))+"px;",this._options.autoHeight?"height:"+height+"px;":"",this._options.autoMargin?"margin-right:"+(this._itemMargin%1===0?this._itemMargin:this._itemMargin.toFixed(4))+'px"':'"',"></li>"].join(""),items="",counter=0;if(!(amount<1)){for(amount=this._async<amount?this._async:amount;amount;)items+=item,amount-=1,counter+=1;this._list.insertAdjacentHTML("beforeend",items),this._items=this._list.querySelectorAll("li"),this._updateARIA(),this._async-=amount,this.emit("itemsadd",Array.prototype.slice.call(this._items,-counter))}}},Carousel.prototype._addPagination=function(){this._paginationCreated&&this._removePagination();for(var isSelected,that=this,thumbs=[],page=that._pages;page;)isSelected=page===that._currentPage,thumbs.unshift("<span",' role="button"',' aria-selected="'+isSelected+'"',' aria-controls="page'+page+'"',' data-page="'+page+'"',' class="'+(isSelected?"ch-carousel-selected":"")+'"',">"+page+"</span>"),page-=1;that._pagination.innerHTML=thumbs.join(""),that._el.appendChild(that._pagination),that._pagination.setAttribute("unselectable","on"),tiny.addClass(that._pagination,"ch-user-no-select"),that._paginationCreated=!0},Carousel.prototype._removePagination=function(){this._paginationCreated&&(this._pagination.innerHTML="",this._paginationCreated=!1)},Carousel.prototype._standbyFX=function(callback){var that=this;this._options.fx&&tiny.support.transition?(tiny.addClass(this._list,"ch-carousel-nofx"),callback.call(this),setTimeout(function(){tiny.removeClass(that._list,"ch-carousel-nofx")},0)):callback.call(this)},Carousel.prototype._updatePages=function(){this._pages=Math.ceil((this._items.length+this._async)/this._limitPerPage),this._loadAsyncItems(),this._updateARIA(),this._updateArrows(),this._options.pagination&&this._addPagination()},Carousel.prototype._updateLimitPerPage=function(){var firstItemOnPage,max=this._options.limitPerPage,limitPerPage=Math.floor(this._maskWidth/this._itemOuterWidth)||1;void 0!==max&&limitPerPage>max&&(limitPerPage=max),limitPerPage!==this._limitPerPage&&(firstItemOnPage=(this._currentPage-1)*this._limitPerPage+1,this._limitPerPage=limitPerPage,this._updatePages(),this.select(Math.ceil(firstItemOnPage/limitPerPage)))},Carousel.prototype._updateDistribution=function(){var spaces,width,cssItemText,moreThanOne=this._limitPerPage>1,freeSpace=this._maskWidth-this._itemOuterWidth*this._limitPerPage,freeSpaceDistribution=this._options.autoMargin?freeSpace/this._limitPerPage/2:freeSpace/this._limitPerPage,extraWidth=moreThanOne?freeSpaceDistribution:freeSpace;extraWidth===this._itemExtraWidth&&extraWidth>0||(this._itemExtraWidth=extraWidth,spaces=moreThanOne?this._limitPerPage-1:0,width=this._itemWidth+extraWidth,this._itemMargin=this._options.autoMargin&&moreThanOne?freeSpace/spaces/2:0,this._pageWidth=(this._itemOuterWidth+extraWidth+this._itemMargin)*this._limitPerPage,this._standbyFX(function(){this._list.style.cssText=this._list.style.cssText+"; width:"+this._pageWidth*this._pages+"px;"}),cssItemText=["width:"+(width%1===0?width:width.toFixed(4))+"px;",this._options.autoHeight?"height:"+(width*this._itemHeight/this._itemWidth).toFixed(4)+"px;":"",this._options.autoMargin?"margin-right:"+(this._itemMargin%1===0?this._itemMargin:this._itemMargin.toFixed(4))+"px;":""].join(""),Array.prototype.forEach.call(this._items,function(item){item.setAttribute("style",cssItemText)}),this._mask.style.height=this._getOuterDimensions(this._list).height+"px",this._standbyFX(function(){this._translate(-this._pageWidth*(this._currentPage-1))}))},Carousel.prototype._addArrows=function(){[this._prevArrow,this._nextArrow].forEach(function(el){el.setAttribute("unselectable","on"),tiny.addClass(el,"ch-user-no-select")}),this._el.insertBefore(this._prevArrow,this._el.children[0]),this._el.appendChild(this._nextArrow),this._arrowsCreated=!0},Carousel.prototype._disableArrows=function(prev,next){this._prevArrow.setAttribute("aria-disabled",prev),this._prevArrow.setAttribute("aria-hidden",prev),tiny[prev?"addClass":"removeClass"](this._prevArrow,"ch-carousel-disabled"),this._nextArrow.setAttribute("aria-disabled",next),this._nextArrow.setAttribute("aria-hidden",next),tiny[next?"addClass":"removeClass"](this._nextArrow,"ch-carousel-disabled")},Carousel.prototype._updateArrows=function(){this._arrowsCreated&&(1===this._pages?this._disableArrows(!0,!0):1===this._currentPage?this._disableArrows(!0,!1):this._currentPage===this._pages?this._disableArrows(!1,!0):this._disableArrows(!1,!1))},Carousel.prototype._translate=function(){var vendorTransformKey=VENDOR_PREFIX?VENDOR_PREFIX+"Transform":null;return tiny.support.transition?function(displacement){vendorTransformKey&&(this._list.style[vendorTransformKey]="translateX("+displacement+"px)"),this._list.style.transform="translateX("+displacement+"px)"}:function(displacement){this._list.style.left=displacement+"px"}}(),Carousel.prototype._switchPagination=function(from,to){if(this._paginationCreated){var children=this._pagination.children,fromItem=children[from-1],toItem=children[to-1];fromItem.setAttribute("aria-selected",!1),tiny.removeClass(fromItem,"ch-carousel-selected"),toItem.setAttribute("aria-selected",!0),tiny.addClass(toItem,"ch-carousel-selected")}},Carousel.prototype._getOuterDimensions=function(el){var obj=el.getBoundingClientRect();return{width:obj.right-obj.left,height:obj.bottom-obj.top}},Carousel.prototype.refresh=function(){var that=this,maskWidth=this._getOuterDimensions(this._mask).width;return maskWidth!==this._maskWidth&&(this._maskWidth=maskWidth,this._updateLimitPerPage(),this._updateDistribution(),this.emit("refresh")),this._list.children.length!==this._items.length&&(this._items=this._list.querySelectorAll("li"),this._updatePages(),this._currentPage>this._pages&&this._standbyFX(function(){that.select(that._pages)}),this.emit("refresh")),this},Carousel.prototype.select=function(page){return void 0===page?this._currentPage:!this._enabled||page===this._currentPage||page<1||page>this._pages?this:(this._translate(-this._pageWidth*(page-1)),this._switchPagination(this._currentPage,page),this._currentPage=page,this._updateArrows(),this._loadAsyncItems(),this.emit("select"),this)},Carousel.prototype.prev=function(){return this.select(this._currentPage-1),this.emit("prev"),this},Carousel.prototype.next=function(){return this.select(this._currentPage+1),this.emit("next"),this},Carousel.prototype.enable=function(){return this._el.setAttribute("aria-disabled",!1),this._disableArrows(!1,!1),parent.enable.call(this),this},Carousel.prototype.disable=function(){return this._el.setAttribute("aria-disabled",!0),this._disableArrows(!0,!0),parent.disable.call(this),this},Carousel.prototype.destroy=function(){this._el.parentNode.replaceChild(this._snippet,this._el),tiny.trigger(window.document,ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Carousel)}(this,this.ch),function(window,ch){"use strict";function normalizeOptions(options){var num=window.parseInt(options,10);return window.isNaN(num)||(options={max:num}),options}function Countdown(el,options){var that=this;this._init(el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}tiny.inherits(Countdown,ch.Component);var parent=Countdown.super_.prototype;Countdown.prototype.name="countdown",Countdown.prototype.constructor=Countdown,Countdown.prototype._defaults={plural:"# characters left.",singular:"# character left.",max:500},Countdown.prototype._init=function(el,options){parent._init.call(this,el,options);var message,that=this,messageID="ch-countdown-message-"+that.uid;return this.trigger=this._el,"keyup keypress keydown input paste cut".split(" ").forEach(function(name){tiny.on(that.trigger,name,function(){that._count()})}),that._remaining=that._options.max-that._contentLength(),message=1===that._remaining?that._options.singular:that._options.plural,that.container=function(){var parent=tiny.parent(that._el);return parent.insertAdjacentHTML("beforeend",'<span class="ch-countdown ch-form-hint" id="'+messageID+'">'+message.replace("#",that._remaining)+"</span>"),parent.querySelector("#"+messageID)}(),this.on("disable",this._removeError),this},Countdown.prototype._contentLength=function(){return this._el.value.length},Countdown.prototype._count=function(){if(!this._enabled)return this;var message,length=this._contentLength();return this._remaining=this._options.max-length,length<=this._options.max?this._exceeded&&(this._exceeded=!1,this._removeError()):length>this._options.max&&(this.emit("exceed"),this._exceeded=!0,this.trigger.setAttribute("aria-invalid","true"),tiny.addClass(this.trigger,"ch-validation-error"),tiny.addClass(this.container,"ch-countdown-exceeded")),message=(1!==this._remaining?this._options.plural:this._options.singular).replace(/\#/g,this._remaining),this.container.innerText=message,this},Countdown.prototype._removeError=function(){return tiny.removeClass(this.trigger,"ch-validation-error"),
this.trigger.setAttribute("aria-invalid","false"),tiny.removeClass(this.container,"ch-countdown-exceeded"),this},Countdown.prototype.destroy=function(){var parentElement=tiny.parent(this.container);parentElement.removeChild(this.container),tiny.trigger(window.document,ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Countdown,normalizeOptions)}(this,this.ch);var carousel=new ch.Carousel(ch(".demo-carousel")[0],{pagination:!0}),extraSuggestions=["<ul>",'<li class="ch-autocomplete-item" data-suggested="Static option">Static option</li>','<li class="ch-autocomplete-item" data-suggested="Other Static option">Other static option</li>',"</ul>"].join(""),autocomplete=new ch.Autocomplete(qS(".autocomplete"),{wrapper:"ch-autocomplete-wrapper"}).on("type",function(userInput){tiny.jsonp("http://suggestgz.mlapps.com/sites/MLA/autosuggest?q="+userInput+"&v=1",{name:"autocompleteSuggestion",success:parseResults,error:function(err){autocomplete.suggest([])}})});autocomplete.container.insertAdjacentHTML("beforeend",extraSuggestions);var calendar=new ch.Calendar(qS(".YOUR_SELECTOR_calendar"),{selected:["2012/01/22","2012/01/21"]}),expandable1=new ch.Expandable(qS(".YOUR_SELECTOR_expandable"));expandable1.on("contentdone",function(){tiny.on(".test","click",function(){console.log("contentdone"+that.uid)})});var expandable2=new ch.Expandable(qS(".YOUR_SELECTOR_expandable2"),{content:"./static/ajax.html",container:qS(".container_expandable2")});expandable2.on("contentdone",function(){var that=this;tiny.on("h2","click",function(){console.log("contentdone"+that.uid)})});var expandable3=new ch.Expandable(qS(".YOUR_SELECTOR_expandable3"),{container:qS("#container")}),expandable4=new ch.Expandable(qS(".YOUR_SELECTOR_expandable4"),{container:qS("#container-ajax"),content:"./static/ajax.html"}),menu=new ch.Menu(qS(".YOUR_SELECTOR_Menu")),dropdown1=new ch.Dropdown(qS(".myDropdown")),dropdown2=new ch.Dropdown(qS(".myDropdownNav"),{shortcuts:!1,skin:!0}),dropdown3=new ch.Dropdown(qS(".myDropdownSkin"),{skin:!0}),tooltip1=new ch.Tooltip(qS("#default")),tooltip2=new ch.Tooltip(qS("#ctcb"),{side:"bottom",align:"center"}),tooltip3=new ch.Tooltip(qS("#rtrb"),{side:"bottom",align:"right"}),tooltip4=new ch.Tooltip(qS("#lblt"),{side:"top",align:"left",offsetY:-10}),tooltip5=new ch.Tooltip(qS("#cbct"),{side:"top",align:"center",offsetY:-10}),tooltip6=new ch.Tooltip(qS("#rbrt"),{side:"top",align:"right",offsetY:-10}),tooltip7=new ch.Tooltip(qS("#ltrt"),{side:"right",align:"top",offsetX:10}),tooltip8=new ch.Tooltip(qS("#lmrm"),{side:"right",align:"center",offsetX:10}),tooltip9=new ch.Tooltip(qS("#lbrb"),{side:"right",align:"bottom",offsetX:10}),tooltip10=new ch.Tooltip(qS("#rtlt"),{side:"left",align:"top",offsetX:-10}),tooltip11=new ch.Tooltip(qS("#rmlm"),{side:"left",align:"center",offsetX:-10}),tooltip12=new ch.Tooltip(qS("#rblb"),{side:"left",align:"bottom",offsetX:-10}),tooltipX=new ch.Tooltip({content:"Tooltip without trigger!",reference:qS("#default")}),layer1=new ch.Layer(qS("#layer1"),{content:"foo"}),layerContent=document.createElement("p");layerContent.innerHTML="This is an HTML P Element as content.";var layer2=new ch.Layer(qS("#layer2"),{content:layerContent,shownby:"pointertap",hiddenby:"all"}),invisibleContent=qS("#invisible-content-for-layer"),layer3=new ch.Layer(qS("#layer3"),{content:invisibleContent,shownby:"pointertap",hiddenby:"none"}),layer4=new ch.Layer(qS("#layer4"),{content:"Plain text.",shownby:"pointertap",hiddenby:"button"}),layer5=new ch.Layer(qS("#layer5"),{content:"./static/ajax.html",shownby:"pointertap",hiddenby:"pointers"}),layerX=new ch.Layer({content:"Layer without trigger!",reference:qS("#layer5")}),layerFixed=new ch.Layer(qS("#components"),{content:qS("#components-list"),shownby:"pointertap",hiddenby:"all",width:"700px",position:"fixed",align:"center",offsetY:"5px"}),bubble=new ch.Bubble({reference:qS("#bubble1")});bubble.on("click",function(){bubble.show()});var modal1=new ch.Modal(qS("#modal1"),{width:"500px",height:"300px"}),modal2=new ch.Modal(qS("#modal2"),{content:document.querySelector("#invisible-content")}),modal3=new ch.Modal(qS("#modal3"),{content:"<h2>Heading or content</h2>",addClass:"ch-modal-lite"}),modalX=new ch.Modal({hiddenby:"button"});tiny.on("#modal-form","submit",function(e){e.preventDefault(),modalX.show("<h2>Heading or content</h2><p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus bibendum consectetur dignissim.</p>")});var transition=new ch.Transition(qS("#transition")),transitionX=new ch.Transition({waiting:"Transition without trigger!"}),zoom1=new ch.Zoom(qS("#zoom-default")),zoom2=new ch.Zoom(qS("#zoom-preload"));zoom2.loadImage();var carousel=new ch.Carousel(qS(".myCarousel"),{pagination:!0}),tabs=new ch.Tabs(qS(".YOUR_SELECTOR_Tabs")),datepicker=new ch.Datepicker(qS("#val_date"),{selected:"2011/11/15",to:"today"}),datepicker2=new ch.Datepicker(qS("#val_date2"),{selected:"2011/11/15",to:"today"}),countdown=new ch.Countdown(qS("#text_cd"),{max:140,plural:"# left",singular:"# left"}),message=function(message,value){var messages={option:"Choose an option.",requiredCheck:"Accept the Terms of Use.",link:'Fill in this information. <a href="#double">Chico UI</a>.'};return function(message,value){var message=messages[message]||message;return value?message.replace("{#num#}",value):message}}(),m=new ch.Modal,form=new ch.Form(qS(".myForm")).on("success",function(event){event.preventDefault(),m.show("success")}).on("error",function(errors){console.log(errors)});tiny.on(form._el,"submit",function(event){form.hasError()||(event.preventDefault(),console.log("Ademas hago otra cosa en el submit"))});var validation1=new ch.Validation(qS("#input_ico"),{conditions:[{name:"required"},{name:"string"}],reference:qS("#input_ico + .ch-form-icon.ch-icon-help-sign")}),validation2=new ch.Validation(qS("#input_ico_inside"),{conditions:[{name:"required"},{name:"number"}]}),validation4=new ch.Validation(qS("#email"),{conditions:[{name:"required"},{name:"email"}]}),validation5=new ch.Validation(qS("#custom"),{conditions:[{name:"myCustom1",fn:function(v){return v.toString().indexOf("1")>-1},message:"The number must contain a 1."},{name:"myCustom2",fn:function(v){return v.toString().indexOf("2")>-1},message:"The number must contain a 2."}]}),validation6=new ch.Validation(qS("#url"),{conditions:[{name:"url"}]}),validation7=new ch.Validation(qS("#number"),{conditions:[{name:"number"},{name:"min",num:5}]}),validation8=new ch.Validation(qS("#range"),{conditions:[{name:"min",num:8},{name:"max",num:10}]}),validation9=new ch.Validation(qS("#characters"),{conditions:[{name:"maxLength",num:20},{name:"minLength",num:6}]}),validation10=new ch.Validation(qS("#select2"),{conditions:[{name:"required",message:message("option")}]}),validation11=new ch.Validation(qS(".required-check"),{conditions:[{name:"required",message:message("requiredCheck")}]}),validation12=new ch.Validation(qS(".required-option"),{conditions:[{name:"required",message:message("option")}]}),validation13=new ch.Validation(qS("#double"),{conditions:[{name:"required",message:message("link")},{name:"number"}]}),validation14=new ch.Validation(qS("#textarea2"),{conditions:[{name:"required"}]});tiny.on('a[href="#"]',"click",function(e){e.preventDefault()});